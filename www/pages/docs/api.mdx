# API Reference

`HybricEditor` is the main integration component.

## `<HybricEditor />` Props

| Prop | Type | Default | Description |
| --- | --- | --- | --- |
| `content` | `string \| JSONContent` | `undefined` | Initial document input. Accepts Markdown/HTML string or Tiptap JSON. |
| `editable` | `boolean` | `true` | Toggles editable mode. |
| `placeholder` | `string` | `"Type '/' for commands..."` | Placeholder text for empty document. |
| `className` | `string` | `undefined` | CSS class applied to editor root container. |
| `extensions` | `Extension[]` | `[]` | Additional Tiptap extensions merged with built-in stack. |
| `editorProps` | `EditorProps` | `undefined` | Native ProseMirror handlers (`handleKeyDown`, `handlePaste`, etc). |
| `onChange` | `(editor: Editor) => void` | `undefined` | High-frequency callback on editor update. Useful for UI sync. |
| `onUpdate` | `({ editor, transaction }) => void` | `undefined` | Transaction-level callback for deep integration hooks. |
| `onDebouncedUpdate` | `({ editor, transaction }) => void` | `undefined` | Debounced callback for persistence. Use this for DB writes. |
| `debounceMs` | `number` | `400` | Delay for `onDebouncedUpdate` in milliseconds. |
| `onExtract` | `(data: { id: string; content: JSON; text: string }) => void` | `undefined` | Fired from context action “Extract to Card”. |

> **Pro tip**: use `onDebouncedUpdate` for network/database persistence. Writing on each keystroke causes unnecessary load and race conditions.

## Editor instance methods

The callback gives access to the Tiptap editor instance.

```ts
editor.chain().focus().toggleBold().run()
editor.getJSON()
editor.getHTML()
editor.commands.clearContent()
editor.commands.focus()
```

## Data structure: block IDs

HybricMark attaches IDs to core block nodes for block-level workflows.

```json
{
  "type": "doc",
  "content": [
    {
      "type": "heading",
      "attrs": { "id": "b1a2-3c4d", "level": 1 },
      "content": [{ "type": "text", "text": "Hello World" }]
    },
    {
      "type": "paragraph",
      "attrs": { "id": "uuid-1234" },
      "content": [{ "type": "text", "text": "This block can be referenced directly." }]
    }
  ]
}
```

> **Why this matters**: block IDs enable granular updates, comments by block, and deterministic references for Notion-like product features.

## Extension composition

```tsx
import CharacterCount from '@tiptap/extension-character-count'

<HybricEditor
  content={doc}
  extensions={[CharacterCount.configure({ limit: 10000 })]}
  editorProps={{
    handleKeyDown: (_view, event) => {
      if ((event.ctrlKey || event.metaKey) && event.key.toLowerCase() === 's') {
        event.preventDefault()
        return true
      }
      return false
    },
  }}
/>
```

## Built-in default behavior

- Typora-like context menu actions.
- Markdown shortcut support for common blocks.
- Link handling optimized for editing (`openOnClick: false` in editing flow).
- Table tooling and inline helpers enabled.
- Optional extraction callback for block-level business actions.
